import{bR as e,b8 as t,am as r,aG as a,aQ as n,b6 as o,ar as s,an as i,ao as l,ap as u}from"./vendor.b002b14f.js";import{n as c,i as d,j as f}from"./main.6b2f59cc.js";var p={exports:{}},y=function(){var e={},t={};return e.on=function(e,r){var a={name:e,handler:r};return t[e]=t[e]||[],t[e].unshift(a),a},e.off=function(e){var r=t[e.name].indexOf(e);-1!==r&&t[e.name].splice(r,1)},e.trigger=function(e,r){var a,n=t[e];if(n)for(a=n.length;a--;)n[a].handler(r)},e},h={exports:{}},m=function(e,t,r){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("script");"function"==typeof t&&(r=t,t={}),t=t||{},r=r||function(){},n.type=t.type||"text/javascript",n.charset=t.charset||"utf8",n.async=!("async"in t)||!!t.async,n.src=e,t.attrs&&function(e,t){for(var r in t)e.setAttribute(r,t[r])}(n,t.attrs),t.text&&(n.text=""+t.text),("onload"in n?g:v)(n,r),n.onload||g(n,r),a.appendChild(n)};function g(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function v(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,a=(r=m)&&r.__esModule?r:{default:r};t.default=function(e){return new Promise((function(t){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function)t(window.YT);else{var r="http:"===window.location.protocol?"http:":"https:";(0,a.default)(r+"//www.youtube.com/iframe_api",(function(t){t&&e.trigger("error",t)}));var n=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){n&&n(),t(window.YT)}}}))},e.exports=t.default}(h,h.exports);var b={exports:{}},w={exports:{}},x={exports:{}},_=1e3,S=60*_,P=60*S,C=24*P,E=365.25*C,k=function(e,t){t=t||{};var r,a=typeof e;if("string"===a&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*E;case"days":case"day":case"d":return r*C;case"hours":case"hour":case"hrs":case"hr":case"h":return r*P;case"minutes":case"minute":case"mins":case"min":case"m":return r*S;case"seconds":case"second":case"secs":case"sec":case"s":return r*_;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===a&&!1===isNaN(e))return t.long?I(r=e,C,"day")||I(r,P,"hour")||I(r,S,"minute")||I(r,_,"second")||r+" ms":function(e){if(e>=C)return Math.round(e/C)+"d";if(e>=P)return Math.round(e/P)+"h";if(e>=S)return Math.round(e/S)+"m";if(e>=_)return Math.round(e/_)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function I(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}!function(e,t){var r;function a(e){function a(){if(a.enabled){var e=a,n=+new Date,o=n-(r||n);e.diff=o,e.prev=r,e.curr=n,r=n;for(var s=new Array(arguments.length),i=0;i<s.length;i++)s[i]=arguments[i];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var l=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(r,a){if("%%"===r)return r;l++;var n=t.formatters[a];if("function"==typeof n){var o=s[l];r=n.call(e,o),s.splice(l,1),l--}return r})),t.formatArgs.call(e,s);var u=a.log||t.log||console.log.bind(console);u.apply(e,s)}}return a.namespace=e,a.enabled=t.enabled(e),a.useColors=t.useColors(),a.color=function(e){var r,a=0;for(r in e)a=(a<<5)-a+e.charCodeAt(r),a|=0;return t.colors[Math.abs(a)%t.colors.length]}(e),"function"==typeof t.init&&t.init(a),a}(t=x.exports=a.debug=a.default=a).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),a=r.length,n=0;n<a;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var r,a;for(r=0,a=t.skips.length;r<a;r++)if(t.skips[r].test(e))return!1;for(r=0,a=t.names.length;r<a;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=k,t.names=[],t.skips=[],t.formatters={}}(0,x.exports),function(e,t){function r(){var e;try{e=t.storage.debug}catch(r){}return!e&&"undefined"!=typeof process&&"env"in process&&(e={}.DEBUG),e}(t=w.exports=x.exports).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var a="color: "+this.color;e.splice(1,0,a,"color: inherit");var n=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(o=n))})),e.splice(o,0,a)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(r){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(r())}(0,w.exports);var V,T,A={exports:{}};V=A,T=A.exports,Object.defineProperty(T,"__esModule",{value:!0}),T.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],V.exports=T.default;var M={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],e.exports=t.default}(M,M.exports);var $={exports:{}},R={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},e.exports=t.default}(R,R.exports),function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,a=(r=R.exports)&&r.__esModule?r:{default:r};t.default={pauseVideo:{acceptableStates:[a.default.ENDED,a.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[a.default.ENDED,a.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[a.default.ENDED,a.default.PLAYING,a.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},e.exports=t.default}($,$.exports),function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=s(w.exports),a=s(A.exports),n=s(M.exports),o=s($.exports);function s(e){return e&&e.__esModule?e:{default:e}}var i=(0,r.default)("youtube-player"),l={proxyEvents:function(e){var t={},r=function(r){var a="on"+r.slice(0,1).toUpperCase()+r.slice(1);t[a]=function(t){i('event "%s"',a,t),e.trigger(r,t)}},a=!0,o=!1,s=void 0;try{for(var l,u=n.default[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){r(l.value)}}catch(c){o=!0,s=c}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}return t},promisifyPlayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={},n=function(a){t&&o.default[a]?r[a]=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.then((function(e){var t=o.default[a],n=e.getPlayerState(),s=e[a].apply(e,r);return t.stateChangeRequired||Array.isArray(t.acceptableStates)&&-1===t.acceptableStates.indexOf(n)?new Promise((function(r){e.addEventListener("onStateChange",(function a(){var n=e.getPlayerState(),o=void 0;"number"==typeof t.timeout&&(o=setTimeout((function(){e.removeEventListener("onStateChange",a),r()}),t.timeout)),Array.isArray(t.acceptableStates)&&-1!==t.acceptableStates.indexOf(n)&&(e.removeEventListener("onStateChange",a),clearTimeout(o),r())}))})).then((function(){return s})):s}))}:r[a]=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.then((function(e){return e[a].apply(e,r)}))}},s=!0,i=!1,l=void 0;try{for(var u,c=a.default[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value;n(d)}}catch(f){i=!0,l=f}finally{try{!s&&c.return&&c.return()}finally{if(i)throw l}}return r}};t.default=l,e.exports=t.default}(b,b.exports),function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=s(y),n=s(h.exports),o=s(b.exports);function s(e){return e&&e.__esModule?e:{default:e}}var i=void 0;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=(0,a.default)();if(i||(i=(0,n.default)(l)),t.events)throw new Error("Event handlers cannot be overwritten.");if("string"==typeof e&&!document.getElementById(e))throw new Error('Element "'+e+'" does not exist.');t.events=o.default.proxyEvents(l);var u=new Promise((function(a){"object"===(void 0===e?"undefined":r(e))&&e.playVideo instanceof Function?a(e):i.then((function(r){var n=new r.Player(e,t);return l.on("ready",(function(){a(n)})),null}))})),c=o.default.promisifyPlayer(u,s);return c.on=l.on,c.off=l.off,c},e.exports=t.default}(p,p.exports);const D=e(p.exports),L={props:{height:{type:[Number,String],default:720},width:{type:[Number,String],default:1280},mute:{type:Boolean,default:!1},refreshRate:{type:Number,default:500},manualUpdate:{type:Boolean}},data:()=>({player:{},updateTimer:null}),beforeDestroy(){this.updateTimer&&(clearInterval(this.updateTimer),this.updateTimer=null)},methods:{playerReady(e){this.setMute(this.mute),this.initListeners(),this.$emit("ready",e)},playerError(e){console.log(`[PLAYER ERROR] - ${this.elementId}`),console.error(e),this.$emit("error",e)},getCurrentTime(){},getPlaybackRate(){},getVolume(){},isMuted(){},initListeners(){if(this.manualUpdate)return;const e=this.$listeners.currentTime,t=this.$listeners.playbackRate,r=this.$listeners.mute;(this.$listeners.volume||e||t||r)&&(this.updateTimer=setInterval(this.updateListeners,this.refreshRate))},async updateListeners(){const e=this.$listeners;e.mute&&this.$emit("mute",await this.isMuted()),e.playbackRate&&this.$emit("playbackRate",await this.getPlaybackRate()),e.currentTime&&this.$emit("currentTime",await this.getCurrentTime()),e.volume&&this.$emit("volume",await this.getVolume())}}};var O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{attrs:{id:e.elementId}})])},N=[];O._withStripped=!0;let B=1;const j={};var Y=c({name:"Youtube",mixins:[L],props:{videoId:String,playerVars:{type:Object,default:()=>({})}},data:()=>(B+=1,{events:{[-1]:"unstarted",1:"playing",2:"paused",0:"ended",3:"buffering",5:"cued"},elementId:`youtube-player-${B}`}),computed:{},watch:{videoId:"updatePlayer",mute:"setMute"},beforeDestroy(){null!==this.player&&this.player.destroy&&(this.player.destroy(),delete this.player)},async mounted(){window.YTConfig={host:"https://www.youtube.com/iframe_api"};this.player=D(this.elementId,{host:"https://www.youtube.com",width:this.width,height:this.height,videoId:this.videoId,playerVars:this.playerVars}),this.player.on("ready",(e=>this.playerReady(e.target))),this.player.on("stateChange",this.playerStateChange),this.player.on("error",this.playerError)},methods:{playerStateChange(e){null!==e.data&&-1!==e.data&&this.$emit(this.events[e.data],e.target)},updatePlayer(e){if(!e)return void this.player.stopVideo();const t={videoId:e};"number"==typeof this.playerVars.start&&(t.startSeconds=this.playerVars.start),"number"==typeof this.playerVars.end&&(t.endSeconds=this.playerVars.end),console.log("LoadVideoByID in Vue-Youtube",t),1!==this.playerVars.autoplay?this.player.cueVideoById(t):this.player.loadVideoById(t)},setMute(e){this.player&&(e?this.player.mute():this.player.unMute())},getCurrentTime(){return this.player.getCurrentTime()},getPlaybackRate(){return this.player.getPlaybackRate()},getVolume(){return this.player.getVolume()},isMuted(){return this.player.isMuted()},async sendLikeEvent(){(await this.player.getIframe()).contentWindow.postMessage({event:"likeVideo"},"*")}}},O,N,!1,U,null,null,null);function U(e){for(let t in j)this[t]=j[t]}Y.options.__file="src/components/player/YoutubePlayer.vue";const F=function(){return Y.exports}(),z={name:"SongItem",props:{song:{type:Object,required:!0},showArtist:{type:Boolean,default:!0},showSongArt:{type:Boolean,default:!0},verticalList:{type:Boolean,default:!0},detailed:{type:Boolean,default:!1},alwaysShowDeletion:{type:Boolean,default:!1},showTime:{type:Boolean,default:!1},hoverIcon:{type:String,default:null},artworkHoverIcon:{type:String,default:null},color:{type:String,default:null}},data:()=>({albumArt:null}),computed:{userCanDelete(){const e=this.$store.state.userdata;return e&&e.user&&e.user.role&&e.user.id&&("user"!==e.user.role||+e.user.id==+this.song.creator_id)},formattedTime(){return d(this.song.available_at,this.$store.state.settings.lang,this.$t.bind(this))},nameProperty(){return this.$store.state.settings.nameProperty}},methods:{secondsToHuman:f}};var G=function(){var e=this,c=e.$createElement,d=e._self._c||c;return d(t,{scopedSlots:e._u([{key:"default",fn:function(c){var f=c.hover;return[d(r,{on:{click:function(t){return t.stopPropagation(),e.$emit("play",e.song)}}},[d(t,{scopedSlots:e._u([{key:"default",fn:function(t){var r=t.hover;return[d(a,{attrs:{tile:""}},[e.song.art?d(n,{attrs:{"lazy-src":"",src:e.song.art}}):d(o,{staticClass:"d-flex pa-1",attrs:{width:"100%",height:"100%",color:"grey darken-1"}},[d(s,{staticClass:"ma-auto",attrs:{small:"",icon:"",outlined:"",disabled:""}},[d(i,{attrs:{small:""}},[e._v(" "+e._s(e.icons.mdiMusic)+" ")])],1)],1),f&&!r?d(o,{staticClass:"d-flex pa-1 hover-item",staticStyle:{position:"absolute",left:"0px"},attrs:{width:"100%",height:"100%",color:"transparent"}},[d(s,{staticClass:"ma-auto",attrs:{"x-small":"",fab:"",color:"blue lighten-3",elevation:"2"}},[d(i,{attrs:{small:""}},[e._v(" "+e._s(e.hoverIcon)+" ")])],1)],1):e._e(),e.$listeners.playNow&&r?d(o,{staticClass:"d-flex pa-1 hover-art",staticStyle:{position:"absolute",left:"0px"},attrs:{width:"100%",height:"100%",color:"transparent"}},[d(s,{staticClass:"ma-auto",attrs:{"x-small":"",fab:"",color:"blue lighten-3",elevation:"2"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.$emit("playNow",e.song)}}},[d(i,{attrs:{small:""}},[e._v(" "+e._s(e.artworkHoverIcon)+" ")])],1)],1):e._e()],1)]}}],null,!0)}),d(l,{staticClass:"py-1 pt-1"},[d(u,{staticClass:"text-subtitle-1",class:e.color},[e.alwaysShowDeletion||e.detailed&&e.$listeners.remove&&e.userCanDelete?d("a",{staticClass:"text-caption error--text float-right ml-1 song-clickable",on:{click:function(t){return t.stopPropagation(),e.$emit("remove",e.song)}}},[e._v(" "+e._s(e.$t("component.media.remove"))+" ")]):e._e(),e.detailed?d("div",{staticClass:"float-right text-caption"},[e._v(" ["+e._s(e.secondsToHuman(e.song.start))+" - "+e._s(e.secondsToHuman(e.song.end))+"] ")]):e._e(),d("span",{staticClass:"limit-width"},[e._v(" "+e._s(e.song.name)+" / "),d("span",{staticClass:"primary--text"},[e._v(e._s(e.song.original_artist))])])]),d(u,{staticClass:"text--caption",class:e.color},[d("div",{staticClass:"float-right"},[e.showTime?d("span",{staticClass:"muted"},[e._v(e._s(e.formattedTime))]):e._e(),e._v(" "+e._s(Math.floor((e.song.end-e.song.start)/60))+":"+e._s((Math.round(e.song.end-e.song.start)%60).toString().padStart(2,"0"))+" ")]),e.$listeners.channel?d("span",{staticClass:"song-clickable",on:{click:function(t){return t.stopPropagation(),e.$emit("channel",e.song)}}},[e._v(" "+e._s(e.song.channel[e.nameProperty]||e.song.channel.name)+" ")]):d("span",[e._v(" "+e._s(e.song.channel[e.nameProperty]||e.song.channel.name)+" ")])])],1)],1)]}}])})},q=[];G._withStripped=!0;const H={};var Q=c(z,G,q,!1,J,"5f5fef7a",null,null);function J(e){for(let t in H)this[t]=H[t]}Q.options.__file="src/components/media/SongItem.vue";const W=function(){return Q.exports}(),Z=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:W});export{W as S,F as Y,Z as a};